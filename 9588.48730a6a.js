"use strict";(self.webpackChunkcddl=self.webpackChunkcddl||[]).push([[9588],{35237(e,n,t){t.r(n);var r=t(57222);let o;r.eo.register({id:"cddl",extensions:[".cddl"],aliases:["CDDL","cddl"],mimetypes:["text/cddl"]}),r.eo.setMonarchTokensProvider("cddl",{tokenizer:{root:[[/;.*$/,"comment"],[/\b(any|integer|uint|nint|int|bstr|bytes|tstr|text|tdate|time|number|biguint|bignint|bigint|unsigned|decfrac|bigfloat|eb64url|eb64legacy|eb16|encoded-cbor|uri|b64url|b64legacy|regexp|mime-message|cbor-any|float16|float32|float64|float16-32|float32-64|float|false|true|bool|nil|null|undefined)\b/,"keyword"],[/\b\d+(\.\d+)?([eE][+-]?\d+)?\b/,"number"],[/#\w+/,"number"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/'/,"string","@stringSingle"],[/(=|\/\/=|\/=)/,"operator"],[/(=>|:|\^|\?|\+|\*|\/\/|\/)/,"operator"],[/\.(size|bits|regexp|pcre|cbor|cborseq|within|and|lt|le|gt|ge|eq|ne|default)/,"keyword.operator"],[/\.\.\./,"operator"],[/\.\./,"operator"],[/\$\$/,"keyword.operator"],[/\$/,"keyword.operator"],[/[a-zA-Z_][\w-]*/,"identifier"],[/[\[\]]/,"bracket.square"],[/[{}]/,"bracket.curly"],[/[()]/,"bracket.parenthesis"],[/[<>]/,"bracket.angle"],[/,/,"delimiter"],[/[ \t\r\n]+/,"white"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],stringSingle:[[/[^\\']+/,"string"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]]}}),r.EN.defineTheme("cddl-dark",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"6A9955",fontStyle:"italic"},{token:"keyword",foreground:"C586C0",fontStyle:"bold"},{token:"keyword.operator",foreground:"D16969"},{token:"operator",foreground:"D4D4D4"},{token:"number",foreground:"B5CEA8"},{token:"string",foreground:"CE9178"},{token:"string.invalid",foreground:"F44747"},{token:"string.escape.invalid",foreground:"F44747"},{token:"identifier",foreground:"9CDCFE"},{token:"bracket.square",foreground:"FFD700"},{token:"bracket.curly",foreground:"DA70D6"},{token:"bracket.parenthesis",foreground:"569CD6"},{token:"bracket.angle",foreground:"4EC9B0"},{token:"delimiter",foreground:"808080"}],colors:{"editor.background":"#0f1117","editor.foreground":"#e2e8f0","editor.lineHighlightBackground":"#1c1e2d","editor.selectionBackground":"#2a2d5e","editorCursor.foreground":"#6366f1","editorLineNumber.foreground":"#3a3f5c","editorLineNumber.activeForeground":"#6366f1","editor.inactiveSelectionBackground":"#1e2235","editorIndentGuide.background1":"#1e2030","editorIndentGuide.activeBackground1":"#2a2d3e"}}),r.EN.defineTheme("cddl-light",{base:"vs",inherit:!0,rules:[{token:"comment",foreground:"6a737d",fontStyle:"italic"},{token:"keyword",foreground:"d63384",fontStyle:"bold"},{token:"keyword.operator",foreground:"cf222e"},{token:"operator",foreground:"24292f"},{token:"number",foreground:"0550ae"},{token:"string",foreground:"0a3069"},{token:"string.invalid",foreground:"cf222e"},{token:"string.escape.invalid",foreground:"cf222e"},{token:"identifier",foreground:"0550ae"},{token:"bracket.square",foreground:"e3b341"},{token:"bracket.curly",foreground:"8250df"},{token:"bracket.parenthesis",foreground:"0969da"},{token:"bracket.angle",foreground:"1a7f37"},{token:"delimiter",foreground:"57606a"}],colors:{"editor.background":"#f8f9fc","editor.foreground":"#1e293b","editor.lineHighlightBackground":"#f0f1f5","editor.selectionBackground":"#c8d1e0","editorCursor.foreground":"#4f46e5","editorLineNumber.foreground":"#94a3b8","editorLineNumber.activeForeground":"#4f46e5","editor.inactiveSelectionBackground":"#e8e9ef","editorIndentGuide.background1":"#e8e9ef","editorIndentGuide.activeBackground1":"#d4d6de"}}),r.eo.registerCompletionItemProvider("cddl",{provideCompletionItems:()=>({suggestions:[["tstr","Text string"],["bstr","Byte string"],["uint","Unsigned integer"],["int","Integer"],["float","Floating point number"],["bool","Boolean"],["null","Null value"],["any","Any value"],["text","Text string (alias for tstr)"],["bytes","Byte string (alias for bstr)"]].map(([e,n])=>({label:e,kind:r.eo.CompletionItemKind.Keyword,insertText:e,documentation:n}))})});let a=!1;const i="cddl-playground-check-refs";let s=!1;const l="cddl-playground-format-on-save";let c=!0;const d="cddl-playground-theme",u=[{category:"Basics",items:[{name:"Hello World",desc:"Minimal schema with a single text rule",source:"; The simplest possible CDDL schema\ngreeting = text\n"},{name:"Basic Types",desc:"Common CDDL primitive types",source:"; Basic CDDL types\nname = text\nage = uint\ntemperature = float\nactive = bool\nidentifier = bytes\n"},{name:"Person Record",desc:"Map with required and optional fields",source:"; A person record with optional fields\nperson = {\n  name: text,\n  age: uint,\n  ? email: text,\n  ? phone: text,\n}\n"},{name:"Arrays & Ranges",desc:"Array definitions and value constraints",source:"; Arrays and value ranges\ncolor = &(red: 1, green: 2, blue: 3)\n\npercentage = 0.0..100.0\n\nrgb = [3 uint .size 1]\n\npalette = [+ color]\n\nscores = [* percentage]\n"},{name:"Choice Types",desc:"Type alternatives using //",source:'; Choice types (type unions)\ncontact = phone-contact / email-contact / address-contact\n\nphone-contact = {\n  type: "phone",\n  number: text,\n}\n\nemail-contact = {\n  type: "email",\n  address: text,\n}\n\naddress-contact = {\n  type: "address",\n  street: text,\n  city: text,\n  country: text,\n}\n'},{name:"Generics",desc:"Parameterised type definitions",source:"; Generic (parameterised) types\npaginated<T> = {\n  items: [* T],\n  page: uint,\n  total: uint,\n  ? next: uri,\n}\n\nuser = {\n  id: uint,\n  name: text,\n}\n\nuser-page = paginated<user>\n"}]},{category:"Intermediate",items:[{name:"Socket / Plug",desc:"Extensible types via $/ $$ sockets",source:"; Extensible records using socket/plug (RFC 8610 §3.9)\nPersonalData = {\n  ? displayName: tstr,\n  NameComponents,\n  ? age: uint,\n  * $$personaldata-extensions,\n}\n\nNameComponents = (\n  ? firstName: tstr,\n  ? familyName: tstr,\n)\n\n; Extensions can be added from different sources\n$$personaldata-extensions //= (\n  favorite-salsa: tstr,\n)\n\n$$personaldata-extensions //= (\n  shoesize: uint,\n)\n"},{name:"Constrained Strings",desc:"Size and regex control operators",source:'; String constraints with control operators\nhostname = text .regexp "[a-zA-Z][a-zA-Z0-9\\\\-]*(\\\\.[a-zA-Z][a-zA-Z0-9\\\\-]*)*"\n\nemail = text .regexp "[a-zA-Z0-9._%+\\\\-]+@[a-zA-Z0-9.\\\\-]+\\\\.[a-zA-Z]{2,}"\n\nshort-text = text .size (1..256)\n\nsha256-hash = bytes .size 32\n\nport = uint .size 2\n\nip4-addr = bytes .size 4\n\nip6-addr = bytes .size 16\n'},{name:"Tagged CBOR",desc:"CBOR tags and embedded data",source:"; CBOR tags and embedded CBOR\ndate-time = #6.0(tstr)\n\nepoch-time = #6.1(int / float)\n\nbignum = #6.2(bstr)\n\nuri = #6.32(tstr)\n\nembedded-cbor = #6.24(bstr .cbor inner-structure)\n\ninner-structure = {\n  version: uint,\n  payload: bytes,\n}\n"},{name:"Occurrence Indicators",desc:"Optional, one-or-more, and exact counts",source:"; Occurrence indicators\nconfig = {\n  ; Required field (exactly once)\n  name: text,\n\n  ; Optional field (zero or one)\n  ? description: text,\n\n  ; One or more tags\n  tags: [+ text],\n\n  ; Zero or more metadata entries\n  metadata: {* text => any},\n\n  ; Exactly 3 priority levels\n  priorities: [3 uint],\n\n  ; Between 1 and 5 items\n  items: [1*5 item],\n}\n\nitem = {\n  id: uint,\n  value: any,\n}\n"}]},{category:"Real-World",items:[{name:"JSON Web Token (JWT)",desc:"Claims set for a JWT/CWT token",source:"; JWT / CWT Claims Set (RFC 7519 / RFC 8392)\nclaims-set = {\n  ? iss: text,            ; Issuer\n  ? sub: text,            ; Subject\n  ? aud: text / [+ text], ; Audience\n  ? exp: uint,            ; Expiration Time\n  ? nbf: uint,            ; Not Before\n  ? iat: uint,            ; Issued At\n  ? jti: text,            ; JWT ID\n  * text => any,          ; Additional claims\n}\n"},{name:"COSE Key",desc:"COSE Key structure (RFC 9052)",source:"; COSE Key Structure (RFC 9052 / RFC 9053)\nCOSE-Key = {\n  1 => kty,              ; Key Type\n  ? 2 => bytes,          ; Key ID\n  ? 3 => int / text,     ; Algorithm\n  ? 4 => [+ key-ops],    ; Key Operations\n  ? 5 => bytes,          ; Base IV\n  * label => any,\n}\n\nkty = int / text\n\nkey-ops = int / text\n\nlabel = int / text\n\n; EC2 key parameters (for P-256, P-384, P-521)\nCOSE-Key-EC2 = COSE-Key .and {\n  -1 => int,             ; Curve\n  -2 => bytes,           ; x-coordinate\n  ? -3 => bytes,         ; y-coordinate\n  ? -4 => bytes,         ; Private key\n}\n"},{name:"Reputon",desc:"Reputation Interchange (RFC 7071)",source:"; Reputation Interchange format (RFC 7071)\nreputation-object = {\n  reputation-context,\n  reputon-list,\n}\n\nreputation-context = ( application: text )\n\nreputon-list = ( reputons: reputon-array )\n\nreputon-array = [* reputon]\n\nreputon = {\n  rater-value,\n  assertion-value,\n  rated-value,\n  rating-value,\n  ? conf-value,\n  ? normal-value,\n  ? sample-value,\n  ? gen-value,\n  ? expire-value,\n  * ext-value,\n}\n\nrater-value = ( rater: text )\nassertion-value = ( assertion: text )\nrated-value = ( rated: text )\nrating-value = ( rating: float16 )\nconf-value = ( confidence: float16 )\nnormal-value = ( normal-rating: float16 )\nsample-value = ( sample-size: uint )\ngen-value = ( generated: uint )\nexpire-value = ( expires: uint )\next-value = ( text => any )\n"},{name:"CoSWID Tag",desc:"Concise Software Identification (RFC 9393)",source:"; Concise Software Identification — CoSWID (RFC 9393)\nconcise-swid-tag = {\n  tag-id => text / bstr .size 16,\n  tag-version => integer,\n  ? corpus => bool,\n  ? patch => bool,\n  ? supplemental => bool,\n  software-name => text,\n  ? software-version => text,\n  ? version-scheme => $version-scheme,\n  entity => entity-entry / [2* entity-entry],\n  ? link => link-entry / [2* link-entry],\n  * $$coswid-extension,\n}\n\n$version-scheme /= &(\n  multipartnumeric: 1,\n  multipartnumeric-suffix: 2,\n  alphanumeric: 3,\n  decimal: 4,\n  semver: 16384,\n)\n$version-scheme /= uint / text\n\nentity-entry = {\n  entity-name => text,\n  ? reg-id => uri,\n  role => $role / [2* $role],\n  ? thumbprint => hash-entry,\n  * $$entity-extension,\n}\n\n$role /= &(\n  tag-creator: 1,\n  software-creator: 2,\n  aggregator: 3,\n  distributor: 4,\n  licensor: 5,\n)\n$role /= uint / text\n\nlink-entry = {\n  ? artifact => text,\n  href => uri,\n  rel => $rel,\n  ? media-type => text,\n  * $$link-extension,\n}\n\n$rel /= &(\n  ancestor: -1,\n  component: -2,\n  feature: -3,\n  installationmedia: -4,\n  packageinstaller: -5,\n  parent: -6,\n  patches: -7,\n  requires: -8,\n  see-also: -9,\n  supersedes: -10,\n  supplemental: -11,\n)\n$rel /= int / text\n\nhash-entry = [hash-alg-id: int, hash-value: bytes]\n\ntag-id = 0\ntag-version = 12\nsoftware-name = 1\nsoftware-version = 13\nversion-scheme = 14\nentity = 2\nlink = 4\ncorpus = 8\npatch = 9\nsupplemental = 11\nentity-name = 31\nreg-id = 32\nrole = 33\nthumbprint = 34\nartifact = 37\nhref = 38\nrel = 40\nmedia-type = 41\nuri = text\n"},{name:"WebAuthn Attestation",desc:"Web Authentication attestation object",source:'; WebAuthn Attestation Object (simplified)\nattestation-object = {\n  fmt: text,\n  attStmt: attestation-statement,\n  authData: bytes,\n}\n\nattestation-statement = packed-stmt / tpm-stmt / none-stmt\n\npacked-stmt = {\n  alg: int,\n  sig: bytes,\n  ? x5c: [+ bytes],\n}\n\ntpm-stmt = {\n  alg: int,\n  sig: bytes,\n  ver: "2.0",\n  ? x5c: [+ bytes],\n  certInfo: bytes,\n  pubArea: bytes,\n}\n\nnone-stmt = {}\n\nauthenticator-data = bytes\n\ncredential-public-key = {\n  1 => int,              ; kty\n  3 => int,              ; alg\n  -1 => int,             ; crv (for EC2)\n  -2 => bytes,           ; x\n  -3 => bytes,           ; y\n}\n\nrp-entity = {\n  id: text,\n  name: text,\n  ? icon: text,\n}\n\nuser-entity = {\n  id: bytes .size (1..64),\n  name: text,\n  displayName: text,\n  ? icon: text,\n}\n'},{name:"EAT Token",desc:"Entity Attestation Token (EAT)",source:"; Entity Attestation Token (EAT) — simplified\neat-token = {\n  ; Standard CWT/JWT claims\n  ? 1 => text,             ; iss\n  ? 2 => text,             ; sub\n  ? 4 => uint,             ; exp\n  ? 6 => uint,             ; iat\n\n  ; EAT-specific claims\n  ? 10 => nonce,            ; nonce\n  ? 256 => ueid,            ; UEID\n  ? 258 => oemid,           ; OEM ID\n  ? 259 => security-level,\n  ? 261 => boot-state,\n  ? 265 => [+ swclaim],     ; Software claims\n  * label => any,\n}\n\nnonce = bytes .size (8..64)\n\nueid = bytes .size (7..33)\n\noemid = bytes .size 3 / int\n\nsecurity-level = &(\n  unrestricted: 1,\n  restricted: 2,\n  secure-restricted: 3,\n  hardware: 4,\n)\n\nboot-state = &(\n  secure: 1,\n  insecure: 2,\n  locked: 3,\n)\n\nswclaim = {\n  ? 1 => text,       ; measurement type\n  ? 2 => bytes,      ; measurement value\n  ? 4 => text,       ; version\n  ? 5 => uint,       ; signer ID\n}\n\nlabel = int / text\n"}]}];function g(e){const n=e.position?.line??1,t=e.position?.column??1,r=Array.isArray(e.position?.range)&&2===e.position.range.length?e.position.range:null;let o=e.msg?.short||e.msg?.extended||"Unknown error";o=o.replace(/^(Lexer error|Parser error|Error)[.:]\s*/i,"").trim(),o&&/^[a-z]/.test(o)&&(o=o[0].toUpperCase()+o.slice(1)),o&&!/[.!?]$/.test(o)&&(o+=".");const a=o.toLowerCase();let i="Syntax";return/\btoken\b|character|symbol|escape|unterminated|byte string|text string|hexfloat|exponent/.test(a)?i="Lexer":/expected|unexpected|missing|invalid.*syntax|must be/.test(a)?i="Parser":/not defined|undefined|unknown/.test(a)?i="Reference":/duplicate|already defined/.test(a)&&(i="Duplicate"),{line:n,column:t,range:r,message:o,category:i,severity:e.severity||"error",_raw:e}}const m="cddl-playground-content";function M(){try{const e=localStorage.getItem(m);if(e)return e}catch(e){}return"; Example CDDL schema\nperson = {\n  name: text,\n  age: 0..120,\n  ? address: text,\n  ? email: text,\n}\n\npeople = [* person]"}let p,y,A,x,f,D,b,I;function C(e){const n=e.length;let t=0,r=0;for(let o=0;o<n;o++)"error"===e[o].severity?t++:r++;if(f.textContent=n,f.classList.toggle("zero",0===n),y.className="status-pill",t>0){y.classList.add("invalid");const e=[];e.push(`${t} error${t>1?"s":""}`),r>0&&e.push(`${r} warning${r>1?"s":""}`),A.textContent=e.join(", ")}else r>0?(y.classList.add("valid"),A.textContent=`Valid • ${r} warning${r>1?"s":""}`):(y.classList.add("valid"),A.textContent="Valid");if(0===n)return D.innerHTML="",void D.appendChild(function(){const e=document.createElement("div");return e.className="problems-empty",e.innerHTML='\n    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>\n      <polyline points="22 4 12 14.01 9 11.01"/>\n    </svg>\n    No problems detected\n  ',e}());x.classList.remove("collapsed");const o=document.createDocumentFragment();for(let t=0;t<n;t++){const n=e[t],r="warning"===n.severity,a=document.createElement("div");a.className=r?"problem-row warning":"problem-row";const i=n._openerLine||n.line,s=n._openerColumn||n.column;a.onclick=()=>L(i,s);const l=r?'<svg class="problem-icon" viewBox="0 0 16 16" fill="currentColor">\n          <path d="M8.22 1.754a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-.25-5.25a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0Z"/>\n        </svg>':'<svg class="problem-icon" viewBox="0 0 16 16" fill="currentColor">\n          <path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1ZM7.25 4.5a.75.75 0 0 1 1.5 0v3.25a.75.75 0 0 1-1.5 0V4.5ZM8 10.5A.75.75 0 1 1 8 12a.75.75 0 0 1 0-1.5Z"/>\n        </svg>';a.innerHTML=`${l}<span class="problem-message">${j(n.message)}</span><span class="problem-category">${j(n.category)}</span><span class="problem-location">[Ln ${i}, Col ${s}]</span>`,o.appendChild(a)}D.innerHTML="",D.appendChild(o)}const h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},w=/[&<>"']/g;function j(e){return e.replace(w,e=>h[e])}function L(e,n){p&&(p.setPosition({lineNumber:e,column:n}),p.focus(),p.revealLineInCenter(e))}let N,k,v="";function T(){clearTimeout(N),N=setTimeout(z,400)}function z(){const e=p.getValue();if(e===v)return;if(v=e,clearTimeout(k),k=setTimeout(()=>function(e){try{localStorage.setItem(m,e)}catch(e){}}(v),1e3),!e.trim())return C([]),r.EN.setModelMarkers(p.getModel(),"cddl",[]),y.className="status-pill",void(A.textContent="Ready");y.className="status-pill checking",A.textContent="Checking…";const n=function(e){if(!o?.validate_cddl_from_str)return{isValid:!1,errors:[{line:1,column:1,range:null,message:"WASM module not ready.",category:"Internal"}]};try{const r=o.validate_cddl_from_str(e,a);if(!Array.isArray(r)||0===r.length)return{isValid:!0,errors:[]};const i=(n=r.map(g),t=e,n.map(e=>{const n=e.message.toLowerCase();if(!/expected.*\b(group_choice_op|group\s*entry|grpchoice|grpent|type_choice_op|type\b)/i.test(n)&&!/expected.*\b(eoi|rule)\b/i.test(n))return e;const r=t.split("\n");let o=0;for(let n=0;n<e.line-1&&n<r.length;n++)o+=r[n].length+1;o+=e.column-1;const a=function(e,n){const t=[],r={"{":"}","[":"]","(":")"},o=new Set(["}","]",")"]);let a=1,i=1,s=!1,l="",c=!1;const d=null!=n?Math.min(n,e.length):e.length;for(let n=0;n<d;n++){const d=e[n];if("\n"!==d)if(c)i++;else if(s){if("\\"===d){n++,i+=2;continue}d===l&&(s=!1),i++}else";"!==d?'"'!==d&&"'"!==d?(r[d]?t.push({char:d,closer:r[d],line:a,column:i}):o.has(d)&&t.length>0&&t[t.length-1].closer===d&&t.pop(),i++):(s=!0,l=d,i++):(c=!0,i++);else c=!1,a++,i=1}return t.length>0?t[t.length-1]:null}(t,o+50);if(!a)return e;const i="}"===a.closer?"brace '}'":"]"===a.closer?"bracket ']'":"parenthesis ')'";return{...e,message:`Missing closing ${i} — opened on Ln ${a.line}, Col ${a.column}.`,category:"Parser",_openerLine:a.line,_openerColumn:a.column}})),s=new Set,l=i.filter(e=>{const n=e._openerLine?`${e._openerLine}:${e._openerColumn}`:`${e.line}:${e.column}`,t=`${e.message}|${n}`;return!s.has(t)&&(s.add(t),!0)});return{isValid:!l.some(e=>"error"===e.severity),errors:l}}catch(e){return{isValid:!1,errors:[{line:1,column:1,range:null,message:String(e),category:"Internal"}]}}var n,t}(e);C(n.errors);const t=p.getModel(),i=n.errors.map(e=>function(e,n){const t="warning"===n.severity?r.cj.Warning:r.cj.Error;if(n._openerLine){const r=Math.max(1,Math.min(n._openerLine,e.getLineCount())),o=e.getLineContent(r),a=Math.max(1,Math.min(n._openerColumn,o.length+1));return{startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:a+1,message:n.message,severity:t,source:"cddl"}}if(n.range&&2===n.range.length&&n.range[1]>n.range[0]){const r=e.getPositionAt(n.range[0]),o=e.getPositionAt(n.range[1]);return{startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:o.lineNumber,endColumn:o.column,message:n.message,severity:t,source:"cddl"}}const o=Math.max(1,Math.min(n.line,e.getLineCount())),a=e.getLineContent(o),i=Math.max(1,Math.min(n.column,a.length+1));let s=i;const l=a.substring(i-1);if(l.length>0){const e=l.match(/^(?:[a-zA-Z_][\w\-]*|\d[\d.eE+\-]*|"[^"]*"?|'[^']*'?|[^\s,;{}()\[\]]+)/);s=e?i+e[0].length:i+1}s<=i&&(s=Math.min(i+1,a.length+1));const c=a[i-1]||"";if(/^[\]\)}]$/.test(c)){const e=a.substring(0,i-1).trimEnd().length+1;return{startLineNumber:o,startColumn:e,endLineNumber:o,endColumn:e+1,message:n.message,severity:t,source:"cddl"}}if(i>a.length||0===a.trim().length){let r=o,i=a;for(;r>1&&(r--,i=e.getLineContent(r),!(i.trim().length>0)););const s=i.trimEnd(),l=s.match(/[a-zA-Z_][\w\-]*$|"[^"]*"$|'[^']*'$|\S+$/);return l?{startLineNumber:r,startColumn:s.length-l[0].length+1,endLineNumber:r,endColumn:s.length+1,message:n.message,severity:t,source:"cddl"}:{startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:i.length+1,message:n.message,severity:t,source:"cddl"}}return{startLineNumber:o,startColumn:i,endLineNumber:o,endColumn:s,message:n.message,severity:t,source:"cddl"}}(t,e));r.EN.setModelMarkers(t,"cddl",i)}function E(){y=document.getElementById("statusPill"),A=document.getElementById("statusText"),x=document.getElementById("problemsPanel"),f=document.getElementById("problemsBadge"),D=document.getElementById("problemsBody"),b=document.getElementById("problemsEmpty"),I=document.getElementById("cursorPosition");const e=document.getElementById("refCheckTrack");try{a="true"===localStorage.getItem(i)}catch(e){}a&&e.classList.add("active"),document.getElementById("refCheckToggle").addEventListener("click",()=>{a=!a,e.classList.toggle("active",a);try{localStorage.setItem(i,a)}catch(e){}p&&(v="",z())});const n=document.getElementById("formatTrack");try{s="true"===localStorage.getItem(l)}catch(e){}s&&n.classList.add("active"),document.getElementById("formatToggle").addEventListener("click",()=>{s=!s,n.classList.toggle("active",s);try{localStorage.setItem(l,s)}catch(e){}});const g=document.getElementById("examplesWrapper"),m=document.getElementById("examplesBtn"),C=document.getElementById("examplesDropdown"),h=document.createDocumentFragment();for(const e of u){const n=document.createElement("div");n.className="examples-category",n.textContent=e.category,h.appendChild(n);for(const n of e.items){const e=document.createElement("div");e.className="example-item",e.innerHTML=`<span class="example-item-name">${j(n.name)}</span><span class="example-item-desc">${j(n.desc)}</span>`,e.addEventListener("click",()=>{p&&(p.setValue(n.source),v="",z()),g.classList.remove("open")}),h.appendChild(e)}}C.appendChild(h),m.addEventListener("click",e=>{e.stopPropagation(),g.classList.toggle("open")}),document.addEventListener("click",e=>{g.contains(e.target)||g.classList.remove("open")});try{"light"===localStorage.getItem(d)&&(c=!1)}catch(e){}c||document.body.classList.add("light"),document.getElementById("themeToggle").addEventListener("click",()=>{c=!c,document.body.classList.toggle("light",!c),p&&r.EN.setTheme(c?"cddl-dark":"cddl-light");try{localStorage.setItem(d,c?"dark":"light")}catch(e){}});const w=document.getElementById("cddlEditor");if(!w)return;p=r.EN.create(w,{value:M(),language:"cddl",theme:c?"cddl-dark":"cddl-light",fontSize:14,lineHeight:22,fontFamily:"'JetBrains Mono', 'Monaco', 'Menlo', 'Consolas', monospace",fontLigatures:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,automaticLayout:!1,wordWrap:"on",wrappingIndent:"indent",lineNumbers:"on",glyphMargin:!0,folding:!0,renderLineHighlight:"line",cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",smoothScrolling:!0,bracketPairColorization:{enabled:!0},guides:{bracketPairs:"active",indentation:!0},padding:{top:12,bottom:12},hover:{enabled:!0,delay:300,sticky:!0}}),window.editor=p,p.onDidChangeCursorPosition(e=>{I.textContent=`Ln ${e.position.lineNumber}, Col ${e.position.column}`}),window.addEventListener("keydown",e=>{!e.ctrlKey&&!e.metaKey||e.shiftKey||e.altKey||"s"!==e.key.toLowerCase()||(e.preventDefault(),s&&function(){if(!p)return;const e=p.getModel(),n=e.getValue(),t=function(e){const n=e.split("\n"),t=[];let r=0,o=!1;for(let e=0;e<n.length;e++){const a=n[e].trimEnd().trim();if(""===a){!o&&t.length>0&&t.push(""),o=!0;continue}o=!1;const i=a.match(/^[\]})]+/);i&&(r=Math.max(0,r-i[0].length));const s="  ".repeat(r);t.push(s+a);const l=a.replace(/;.*$/,"").replace(/"[^"]*"/g,"").replace(/'[^']*'/g,"");for(const e of l)"{"===e||"["===e||"("===e?r++:"}"!==e&&"]"!==e&&")"!==e||(r=Math.max(0,r-1))}for(;t.length>0&&""===t[t.length-1];)t.pop();return t.push(""),t.join("\n")}(n);if(t!==n){const n=e.getFullModelRange();p.executeEdits("cddl-format",[{range:n,text:t}])}}())}),p.onDidChangeModelContent(T),document.getElementById("problemsHeader").addEventListener("click",()=>{x.classList.toggle("collapsed"),x.classList.contains("collapsed")||p.layout()});const L=document.getElementById("resizeHandle");let N,k=!1;L.addEventListener("mousedown",e=>{if(x.classList.contains("collapsed"))return;e.preventDefault(),k=!0,L.classList.add("active"),document.body.style.cursor="ns-resize",document.body.style.userSelect="none";const n=e.clientY,t=x.offsetHeight;let r;function o(e){cancelAnimationFrame(r),r=requestAnimationFrame(()=>{const r=n-e.clientY,o=Math.max(33,Math.min(t+r,.7*window.innerHeight));x.style.height=o+"px",p.layout()})}document.addEventListener("mousemove",o),document.addEventListener("mouseup",function e(){k=!1,L.classList.remove("active"),document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e)})}),window.addEventListener("resize",()=>{cancelAnimationFrame(N),N=requestAnimationFrame(()=>p.layout())}),p.layout(),async function(){try{const e=await t.e(8560).then(t.bind(t,8560));return await e.default(),o=e,"function"==typeof o.validate_cddl_from_str}catch(e){return console.error("Failed to load WASM:",e),!1}}().then(e=>{e?z():(y.className="status-pill invalid",A.textContent="WASM failed")})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",E):E(),window.jumpToError=L},37584(e){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},68968(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII="},86060(e){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="}}]);